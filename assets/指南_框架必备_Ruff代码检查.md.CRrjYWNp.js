import{_ as s,c as a,o as i,U as t,ah as e,ai as l,aj as p,ak as h}from"./chunks/framework.DUvK6mag.js";const F=JSON.parse('{"title":"Ruff","description":"","frontmatter":{},"headers":[],"relativePath":"指南/框架必备/Ruff代码检查.md","filePath":"指南/框架必备/Ruff代码检查.md","lastUpdated":1717584734000}'),n={name:"指南/框架必备/Ruff代码检查.md"},o=t('<h1 id="ruff" tabindex="-1">Ruff <a class="header-anchor" href="#ruff" aria-label="Permalink to &quot;Ruff&quot;">​</a></h1><p>YouQu 默认使用 Python 最强代码检查&amp;格式化工具——Ruff。</p><p><img src="'+e+'" alt=""></p><h2 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ruff</span></span></code></pre></div><h2 id="代码检查" tabindex="-1">代码检查 <a class="header-anchor" href="#代码检查" aria-label="Permalink to &quot;代码检查&quot;">​</a></h2><p>代码检查是扫描代码中存在的问题。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ruff</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> check</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span></code></pre></div><p>表示扫描当前目录下所有的代码，当然你可以指定一个具体的目录或文件。</p><p><img src="'+l+'" alt=""></p><p>在扫描日志最后可以看到一个 <code>fixable</code>，意思是可以通过 <code>--fix</code> 参数直接给你修复掉。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ruff</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> check</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> setting/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --fix</span></span></code></pre></div><p>对比下文件前后：</p><p><img src="'+p+'" alt=""></p><p>你看，直接修复了对吧。</p><h2 id="代码格式化" tabindex="-1">代码格式化 <a class="header-anchor" href="#代码格式化" aria-label="Permalink to &quot;代码格式化&quot;">​</a></h2><p>经过前面代码检查并修复之后，说明我们代码中没有“问题”了，接下来就可以进行代码格式化。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ruff</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> format</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> setting/</span></span></code></pre></div><p><img src="'+h+'" alt=""></p><p>效果很不错对吧。</p><p>格式化这块 Ruff 官方表示是可以直接替代 Black 的。</p><h2 id="配置" tabindex="-1">配置 <a class="header-anchor" href="#配置" aria-label="Permalink to &quot;配置&quot;">​</a></h2><p>前面代码检查的时候报了一个问题，是说在 <code>__init__.py</code> 文件里面写了一个导入，但没有被使用。</p><p>但是这是我特意这样写的，是一种名称空间的设计，可以在 <code>setting</code> 名称空间下直接导入，不需要 Ruff 处理这个问题，这也不是个问题。</p><p>因此，我们需要对 Ruff 进行配置。</p><p>在根目录下 <code>ruff.toml</code> 的文件：</p><div class="language-toml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">&lt;!--@include: ../../../ruff.toml--&gt;</span></span></code></pre></div><p>在上面配置文件中 <code>ignore = []</code> 写入错误代码：</p><div class="language-toml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ignore = [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;F401&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><p>再次扫描就不会再报之前的问题。</p><p>其他的一些配置也可以根据自己的一些需要进行配置。</p>',31),d=[o];function c(r,k,u,g,f,_){return i(),a("div",null,d)}const b=s(n,[["render",c]]);export{F as __pageData,b as default};
